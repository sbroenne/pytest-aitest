{# Detailed results partial - test list grouped by sessions #}
<section class="section">
    <div class="section-header">
        <h2>ğŸ” Detailed Results</h2>
    </div>
    <div class="section-body">
        {% for session in session_groups %}
        {% if session.is_session %}
        {# Session Container #}
        {% include 'partials/session_container.html' %}
        {% else %}
        {# Non-session tests (regular list) #}
        <div class="test-list">
            {% for test in session.tests %}
            <div class="test-item" onclick="this.classList.toggle('expanded')">
                <div class="test-header">
                    <span class="test-name" title="{{ test.short_name }}">
                        <span class="badge {{ test.outcome }}">{{ test.outcome }}</span>
                        {{ test.display_name }}
                    </span>
                    <span class="test-metrics">
                        <span>{{ "%.2f"|format(test.duration_ms / 1000) }}s</span>
                        {% if test.agent_result %}
                        <span>{{ test.agent_result.token_usage.get('prompt', 0) + test.agent_result.token_usage.get('completion', 0) }} tokens</span>
                        <span>{{ format_cost(test.agent_result.cost_usd) }}</span>
                        {% endif %}
                    </span>
                </div>
                <div class="test-details">
                    {% include 'partials/test_details.html' %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endfor %}
    </div>
</section>
