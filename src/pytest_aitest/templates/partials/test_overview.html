{# Test overview partial - summary table in comparison modes #}
{% if mode != 'simple' and report.tests | length > 1 %}
<section class="section">
    <div class="section-header">
        <h2>ðŸ“‹ Test Overview</h2>
    </div>
    <div class="section-body">
        <div class="matrix-container">
            <table class="matrix">
                <thead>
                    <tr>
                        <th style="text-align: left;">Test Name</th>
                        <th>Status</th>
                        <th>Session</th>
                        <th>Duration</th>
                        <th>Tokens</th>
                        <th>Tools</th>
                    </tr>
                </thead>
                <tbody>
                    {% for test in report.tests %}
                    <tr class="{{ 'cell-passed' if test.outcome.value == 'passed' else 'cell-failed' if test.outcome.value == 'failed' else '' }}">
                        <td class="test-name" title="{{ test.name }}">{{ test.docstring.split('\n')[0] if test.docstring else test.name.split('::')[-1] }}</td>
                        <td class="matrix-cell">
                            <span class="badge {{ test.outcome.value }}">{{ test.outcome.value }}</span>
                        </td>
                        <td class="matrix-cell">
                            {% if test.agent_result and (test.agent_result.session_context_count or 0) > 0 %}
                            <span title="{{ test.agent_result.session_context_count }} prior messages">ðŸ”— {{ test.agent_result.session_context_count }}</span>
                            {% else %}â€”{% endif %}
                        </td>
                        <td class="matrix-cell">{{ "%.2f"|format(test.duration_ms / 1000) }}s</td>
                        <td class="matrix-cell">
                            {% if test.agent_result %}
                            {{ (test.agent_result.token_usage.prompt or 0) + (test.agent_result.token_usage.completion or 0) }}
                            {% else %}â€”{% endif %}
                        </td>
                        <td class="matrix-cell">
                            {% if test.agent_result and test.agent_result.tools_called %}
                            {{ test.agent_result.tools_called | length }}
                            {% else %}â€”{% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endif %}
