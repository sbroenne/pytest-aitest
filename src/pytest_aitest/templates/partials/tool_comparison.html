{# Tool comparison grid - shows which tools each model/prompt used #}
{# Only shown when there are multiple models OR prompts #}
{% if flags.show_tool_comparison and tool_comparison %}
<section class="section">
    <div class="section-header">
        <h2>ðŸ”§ Tool Usage Comparison</h2>
    </div>
    <div class="section-body">
        <div class="matrix-container">
            <table class="matrix tool-comparison">
                <thead>
                    <tr>
                        <th style="text-align: left;">Tool</th>
                        {% for column in tool_comparison.columns %}
                        <th>{{ column }}</th>
                        {% endfor %}
                        <th class="numeric">Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for tool in tool_comparison.tools %}
                    <tr>
                        <td class="tool-name-cell">
                            <code class="tool-name-code">{{ tool.name }}</code>
                        </td>
                        {% for count in tool.counts %}
                        <td class="matrix-cell {{ 'cell-used' if count > 0 else 'cell-unused' }}">
                            {% if count > 0 %}
                            <span class="tool-count">{{ count }}</span>
                            {% else %}
                            <span class="tool-unused">â€”</span>
                            {% endif %}
                        </td>
                        {% endfor %}
                        <td class="numeric total-cell">{{ tool.total }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr class="totals-row">
                        <td><strong>Total Calls</strong></td>
                        {% for total in tool_comparison.column_totals %}
                        <td class="matrix-cell"><strong>{{ total }}</strong></td>
                        {% endfor %}
                        <td class="numeric"><strong>{{ tool_comparison.grand_total }}</strong></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        {% if tool_comparison.summary %}
        <div class="tool-comparison-summary">
            {{ tool_comparison.summary }}
        </div>
        {% endif %}
    </div>
</section>
{% endif %}
