{# Overlay partial - fullscreen diagram viewer #}
<div id="overlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center p-8" onclick="hideOverlay()">
    <button class="absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-2xl text-text-muted hover:text-text-light bg-surface-card rounded-full border border-white/10 transition-colors" onclick="hideOverlay()">âœ•</button>
    <div class="w-[90vw] h-[85vh] overflow-auto bg-surface-card rounded-lg p-6 shadow-material-lg flex items-center justify-center" onclick="event.stopPropagation()">
        <div class="mermaid w-full h-full" id="overlay-mermaid"></div>
    </div>
</div>

{# Hover popup for side-by-side diagrams #}
<div id="diagram-hover-popup" 
     class="fixed z-40 bg-surface-card rounded-lg shadow-material-lg border border-white/10 p-4 hidden max-w-xl"
     onmouseenter="keepDiagramHover()" 
     onmouseleave="hideDiagramHover()"
     onclick="hideOverlay(); this.classList.add('hidden'); showDiagram(document.getElementById('hover-mermaid').innerHTML);">
    <div class="mermaid" id="hover-mermaid"></div>
</div>

<style>
#overlay.active { display: flex !important; }
#diagram-hover-popup.active { display: block !important; }

/* Scale the mermaid SVG in overlay to fill available space */
#overlay-mermaid svg {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    min-height: 60vh;
}
</style>
