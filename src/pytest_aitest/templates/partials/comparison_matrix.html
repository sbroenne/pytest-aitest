{# Comparison grid partial - shows tests across comparison dimensions #}
{% if flags.show_comparison_grid and comparison_grid %}
<section class="section">
    <div class="section-header">
        {% if comparison_grid.mode == 'matrix' %}
        <h2>üìä Comparison Matrix</h2>
        {% elif comparison_grid.mode == 'model_comparison' %}
        <h2>üìä Test Results by Model</h2>
        {% else %}
        <h2>üìä Test Results by Prompt</h2>
        {% endif %}
    </div>
    <div class="section-body">
        <div class="matrix-container">
            <table class="matrix">
                <thead>
                    <tr>
                        <th style="text-align: left;">
                            {% if comparison_grid.mode == 'matrix' %}Prompt{% else %}Test{% endif %}
                        </th>
                        {% for col in comparison_grid.columns %}
                        <th>{{ col }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in comparison_grid.rows %}
                    <tr>
                        <td class="test-name" title="{{ row.name }}">
                            {{ row.display_name }}
                        </td>
                        {% for cell in row.cells %}
                        <td class="matrix-cell {{ 'cell-passed' if cell.outcome == 'passed' else 'cell-failed' if cell.outcome == 'failed' else '' }}">
                            {% if cell.test %}
                            <div class="status">{{ '‚úÖ' if cell.outcome == 'passed' else '‚ùå' if cell.outcome == 'failed' else '‚è≠Ô∏è' }}</div>
                            <div class="metrics">
                                {{ "%.1f"|format(cell.duration / 1000) }}s
                                {% if cell.tokens %}¬∑ {{ cell.tokens }} tok{% endif %}
                            </div>
                            {% else %}
                            <span style="color: var(--c-text-muted);">‚Äî</span>
                            {% endif %}
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endif %}
