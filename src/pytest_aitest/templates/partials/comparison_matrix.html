{# Comparison matrix partial - model √ó prompt grid #}
{% if flags.show_matrix and matrix %}
<section class="section">
    <div class="section-header">
        <h2>üìä Comparison Matrix</h2>
    </div>
    <div class="section-body">
        <div class="matrix-container">
            <table class="matrix">
                <thead>
                    <tr>
                        <th>Prompt / Model</th>
                        {% for model in matrix.models %}
                        <th>{{ model }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for prompt in matrix.prompts %}
                    <tr>
                        <td class="test-name">{{ prompt }}</td>
                        {% for model in matrix.models %}
                        {% set cell = matrix.cells.get((model, prompt)) %}
                        <td class="matrix-cell {{ 'cell-passed' if cell and cell.outcome.value == 'passed' else 'cell-failed' if cell else '' }}">
                            {% if cell %}
                            <div class="status">{{ '‚úÖ' if cell.outcome.value == 'passed' else '‚ùå' }}</div>
                            {% if cell.agent_result %}
                            <div class="metrics">
                                {{ "%.1f"|format(cell.duration_ms / 1000) }}s ¬∑ 
                                {{ (cell.agent_result.token_usage.prompt or 0) + (cell.agent_result.token_usage.completion or 0) }} tok
                            </div>
                            {% endif %}
                            {% else %}
                            <span style="color: var(--c-text-muted);">‚Äî</span>
                            {% endif %}
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endif %}
