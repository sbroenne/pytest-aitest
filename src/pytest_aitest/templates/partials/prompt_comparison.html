{# System Prompt comparison partial - ranked table of system prompts by performance #}
{% if flags.show_prompt_comparison and prompt_groups and not flags.show_matrix %}
<section class="section">
    <div class="section-header">
        <h2>üìù System Prompt Comparison</h2>
    </div>
    <div class="section-body">
        <table class="leaderboard">
            <thead>
                <tr>
                    <th class="rank">Rank</th>
                    <th>System Prompt</th>
                    <th>Pass Rate</th>
                    <th class="numeric">Passed</th>
                    <th class="numeric">Failed</th>
                    <th class="numeric">Tokens</th>
                    <th class="numeric">Avg Duration</th>
                </tr>
            </thead>
            <tbody>
                {% for group in prompt_groups %}
                <tr>
                    <td class="rank">
                        <span class="medal">{{ group.medal }}</span>
                        {% if not group.medal %}{{ group.rank }}{% endif %}
                    </td>
                    <td>{{ group.dimension_value }}</td>
                    <td class="pass-rate-cell">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="width: 3rem;">{{ "%.0f"|format(group.pass_rate) }}%</span>
                            <div class="pass-rate-bar" style="flex: 1;">
                                <div class="fill" style="width: {{ group.pass_rate }}%"></div>
                            </div>
                        </div>
                    </td>
                    <td class="numeric" style="color: var(--c-pass);">{{ group.passed }}</td>
                    <td class="numeric" style="color: var(--c-fail);">{{ group.failed }}</td>
                    <td class="numeric">{{ "{:,}".format(group.total_tokens) }}</td>
                    <td class="numeric">{{ "%.2f"|format(group.avg_duration_ms / 1000) }}s</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endif %}
